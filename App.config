<?xml version="1.0" encoding="utf-8" ?>
<configuration>
	<configSections>
		<sectionGroup name="hvoipm">
			<section name="deviceStateMonitors" type="System.Configuration.NameValueSectionHandler, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089, Custom=null" />
			<section name="behaviours" type="LothianProductions.Util.Settings.SectionHandler, LothianProductionsCommon" />
		</sectionGroup>
	</configSections>
	
	<hvoipm>
		<!--
		Each device monitor that the user wishses to configure can be defined here.
		Multiple monitors can be wired up at a time if required. The application itself
		permits multiple listenings of the same type to run simultaneously, although this
		configuration format doesn't yet.
		
		Any monitor-specific options are set towards the end of this file, in the "appSettings"
		section. Monitor-specific options are preceded by the monitor's classname.
		-->
		<deviceStateMonitors>
			<!--
			This is the default Linksys PAP2 monitor.
			-->
			<add key="Linksys PAP2" value="LothianProductions.VoIP.Monitor.Impl.LinksysPAP2DeviceMonitor" />

			<!--
			This is the TAPI monitor, which is currently in testing.
			-->
			<!--<add key="Nortel BCM" value="LothianProductions.VoIP.Monitor.Impl.TAPIDeviceMonitor" />-->
		</deviceStateMonitors>
		<behaviours>
			<!--
			These behaviour tags allow for customisation of HVoIPM's behaviour on according to
			various state changes.
			
			*	"stateType" and "property" specify the data in question. For instance, when the
				tone of a call changes, the stateType="Call" property="tone" behaviour will be
				evaluated.
			*	"showBubble" indicates that a text bubble should be displayed from the system
				tray when a value change has occurred for this property. If a bubble message is
				to be displayed, it will be displayed formatted with the "bubbleText" property.
				{0} will be substituted with the property's name, {1} with the property's previous
				value, and {2} with the property's new value.
			*	"log" specifies whether a change in that particular property should be logged to
				the system log file, as specified below.
			*	"systemTrayWarning" and "showApplication" define whether HVoIPM should flash its
				system tray icon, or pop up the application when the property's new value matches
				any of the comma-separated list of values as specified in the "warningCriteria"
				field. This allows users to configure HVoIPM to alert them when, for instance,
				their line's registration state goes offline.
				
			Note that there's currently no support for device, line or call name property changes.
			-->
			<behaviour stateType="Device" name="" property="name"			showBubble="true" systemTrayWarning="false" showApplication="false" log="true" bubbleText="Device renamed from {1} to {2}" warningCriteria="" />

			<behaviour stateType="Line" name="" property="name"				showBubble="true" systemTrayWarning="false" showApplication="false" log="true" bubbleText="Line renamed from {1} to {2}" warningCriteria="" />
			<behaviour stateType="Line" name="" property="lastCalledNumber"	showBubble="false" systemTrayWarning="false" showApplication="false" log="true" bubbleText="Last call: {2}" warningCriteria="" />
			<behaviour stateType="Line" name="" property="lastCallerNumber"	showBubble="true" systemTrayWarning="false" showApplication="false" log="true" bubbleText="Last caller: {2}" warningCriteria="" />
			<behaviour stateType="Line" name="" property="registrationState" showBubble="true" systemTrayWarning="true" showApplication="false" log="true" bubbleText="Registration state: {2}" warningCriteria="Offline,Error" />
			<behaviour stateType="Line" name="" property="messageWaiting"	showBubble="true" systemTrayWarning="true" showApplication="false" log="true" bubbleText="Message waiting: {2}" warningCriteria="True" />

			<behaviour stateType="Call" name="" property="name"				showBubble="true" systemTrayWarning="false" showApplication="false" log="false" bubbleText="Call renamed from {1} to {2}" warningCriteria="" />
			<behaviour stateType="Call" name="" property="activity"			showBubble="true" systemTrayWarning="true" showApplication="false" log="false" bubbleText="Call activity: {2}" warningCriteria="Dialing,Error" />
			<behaviour stateType="Call" name="" property="duration"			showBubble="true" systemTrayWarning="false" showApplication="false" log="false" bubbleText="Call duration: {2}" warningCriteria="" />
			<behaviour stateType="Call" name="" property="type"				showBubble="true" systemTrayWarning="false" showApplication="false" log="false" bubbleText="Call type: {2}" warningCriteria="" />
			<behaviour stateType="Call" name="" property="tone"				showBubble="true" systemTrayWarning="false" showApplication="true" log="false" bubbleText="Tone: {2}" warningCriteria="Dial" />
			<behaviour stateType="Call" name="" property="bytesReceived"	showBubble="true" systemTrayWarning="false" showApplication="false" log="false" bubbleText="Bytes received: {2}" warningCriteria="" />
			<behaviour stateType="Call" name="" property="bytesSent"		showBubble="true" systemTrayWarning="false" showApplication="false" log="false" bubbleText="Bytes sent: {2}" warningCriteria="" />
			<behaviour stateType="Call" name="" property="jitter"			showBubble="true" systemTrayWarning="false" showApplication="false" log="false" bubbleText="Jitter: {2}" warningCriteria="" />
			<behaviour stateType="Call" name="" property="roundTripDelay"	showBubble="true" systemTrayWarning="false" showApplication="false" log="false" bubbleText="Roundtrip Delay: {2}" warningCriteria="" />
			<behaviour stateType="Call" name="" property="packetLoss"		showBubble="true" systemTrayWarning="false" showApplication="false" log="false" bubbleText="Packet loss: {2}" warningCriteria="" />
			<behaviour stateType="Call" name="" property="packetError"		showBubble="true" systemTrayWarning="false" showApplication="false" log="false" bubbleText="Packet error: {2}" warningCriteria="" />
			<behaviour stateType="Call" name="" property="encoder"			showBubble="true" systemTrayWarning="false" showApplication="false" log="false" bubbleText="Encoding codec: {2}" warningCriteria="" />
			<behaviour stateType="Call" name="" property="decoder"			showBubble="true" systemTrayWarning="false" showApplication="false" log="false" bubbleText="Decoding codec: {2}" warningCriteria="" />
			<behaviour stateType="Call" name="" property="decodeLatency"	showBubble="true" systemTrayWarning="false" showApplication="false" log="false" bubbleText="Decode latency: {2}" warningCriteria="" />
		</behaviours>
	</hvoipm>

	<appSettings>
		<!-- Hostname specifies the name of the PAP2 to query. -->
		<add key="LinksysPAP2DeviceMonitor:Hostname" value="http://phone" />
		<!-- Username specifies the username to use when accessing the PAP2 if any HTTP authentication is required. -->
		<add key="LinksysPAP2DeviceMonitor:Username" value="" />
		<!-- Username specifies the password to use when accessing the PAP2 if any HTTP authentication is required. -->
		<add key="LinksysPAP2DeviceMonitor:Password" value="" />
		<!-- RequestTimeout specifies the time after making an HTTP request that the monitor should wait before failing.
		If this value is set greater than the PollInterval specified below, the monitor could hit the PAP2 harder than
		it can handle, return questionable data, and possibly degrade VoIP performance. 1000 should be sufficient, although
		sub-100ms values should be possible. -->
		<add key="LinksysPAP2DeviceMonitor:RequestTimeout" value="1000" />
		<!-- PollInterval specifies the delay between polling attempts from the monitor to the PAP2. 1000 should be
		sufficient, although YMMV. -->
		<add key="LinksysPAP2DeviceMonitor:PollInterval" value="1000" />

		<!-- Provider specifies the name of the Windows TAPI TSP binding to use for TAPI communication. -->
		<add key="TAPIDeviceMonitor:Provider" value="Nortel" />

		<!-- The values below are not intended to be user-configurable yet. -->
		<add key="logType" value="xml" />
		<add key="logFile" value="system.xml" />
		<add key="callLogFile" value="calls.csv" />
	</appSettings>
</configuration>
